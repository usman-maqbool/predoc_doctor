{% extends 'base.html' %}

{% load static %}

{% block content %}

<main class="main" id="top">
  
  <div class="container">

          <!-- Loading Modal -->
          {% if request.user.is_agree %}
          
          {% else %}
          <div class="modal  arrow-top fade right" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog left-modal" role="document">
              <div class="modal-content chat" >
                
                <div class="modal-body">
                  <h5 class="my-4 mx-2">Have you read and do you agree to our <a href="{% url 'terms_condition' %}">Terms and Condition</a> and <a href="{% url 'privacy_policy' %}">Privacy Policy</a>?</h5>
                </div>
                <div class="modal-footer">
                  <a href="{% url 'disagree' %}"><button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">No I Don't Agree</button></a>
                  
                  <form method="POST">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-primary" name="is_agree">Yes I Agree</button>
                </form>
                
                </div>
              </div>
            </div>
          </div>
          {% endif %}
          <!-- Loader -->
          <div id="loading-wrapper">
            <div class="" id="loader"></div>
          </div>
         
          <!-- Data Shows Here -->
          <div class="container show_able_div hide animate-bottom" id="show_able_div">

            </div>
            <!-- First Patients Data-->
          <div class="container" id="current_div" style="display:block ;">
            <div class="modal-body">
              <div class=" text-heading">
                <h2 class="text-heading">Current Patient</h2>
                <h4 class=" mt-4 text-dark">{{ obj.patient.first_name }} {{ obj.patient.last_name }}</h4>
                <h4 class="text-dark"> {{ obj.patient.dob }}</h4>
                <h4 class="text-dark">{{ obj.patient.age }} Years Old {{obj.patient.gender}}</h4> 
              </div>
              <div class="mt-4 ">
                <div class="col col-lg-12 ">
                  <div class="border overflow-auto bg-ldight user-inner-text" style="height:40%">
                    <div class="mx-4 p-2">
                      <p class="h5 text-capitalize my-4">{{ obj.qs.syptoms }}</p>
                    </div>
                   </div>
                  <div class="mt-4">
                    <p class="h6">
                      <span class="text-heading border-bottom border-white">Question and Answere</span> - 
                          view the original phrasing and answers                                
                        </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="condition_base_data">

            {% if appoinments %}

            <div class="">
              <h1 class="m-4 pt-4 h1 text-heading"> All Patient </h1>
              <div class="d-flex justify-content-end my-2">
                <span class="counter pull-right"></span>
                <div class="">
                    <input type="text" id="myInput" class="search form-control"  placeholder="Search By Name">
                  </div>
              </div>
              <div class="table-responsive-sm table-responsive-md  table-responsive-lg  custom_table" >
                <table class="table table-striped results table-dark table-hover"  id="myTable"  >
                      <thead >
                        <tr class="text-center text-headisng font-weight-bold">
                          <th scope="col">Name</th>
                          <th scope="col">DOB</th>
                          <th scope="col">Age</th>
                          <th scope="col">Last Saw Dr</th>
                          <th scope="col">Last See Dr</th>
                          <th scope="col">Last Answere</th>
                        </tr>
                      </thead>
                      {% for appoinment in pages %}
                      <tbody>
                        <tr class="text-center text-heading show_div">
                          <th scope="row" onclick="loadingPage()" id="get_ajax_request" class="cursor-pointer button_show_div" data-target="#id-{{appoinment.id}}">
                            {{ appoinment.patient.first_name }}
                          </th>
                          <td>{{appoinment.patient.dob}}</td>
                          <td>{{appoinment.patient.age}}</td>
                          <td>{{appoinment.doctor.first_name}}</td>
                          <td>{{appoinment.doctor.first_name}}</td>
                          <td>{{appoinment.date}} </td>
                        </tr>

                      </tbody>
                      {% endfor %}
                </table>
              </div>
            </div>

            {% if pages.has_other_pages %}
            <div class="d-flex justify-content-end">
            <nav aria-label="Page navigation example">
              <ul class="pagination">
                {% if pages.has_previous %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ pages.previous_page_number }}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                  </a>
                </li>
                {% else %}
                <li class="page-item disabled">
                <a class="page-link" href="{{ request.path }}" aria-label="Previous">&laquo;</a>
                </li>
                {% endif %}

              {% for page_number in pages.paginator.get_elided_page_range %}
                  {% if page_number == pages.paginator.ELLIPSIS %}
                      {{page_number}}
                  {% else %}
                  <li class="page-item {% if page_number == pages.number %} active {% endif %}"><a class="page-link" href="?page={{ page_number }}" class="current">
                        {{page_number}}
                      </a>
                    </li>
                  {% endif %}
              {% endfor %}
                {% if pages.has_next %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ pages.next_page_number }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                  </a>
                </li>
                {% else %}
                
                <li class="page-item disabled"><a class="page-link disabled" href="{{ request.path }}" aria-label="Next">&raquo;</a>
                </li>
                {% endif %}
              </ul>
            </nav>
          </div>
            {% endif %}
            {% else %}
              <div class="row justify-content-center text-center my-4" >
                <div class="col-lg-4 col-sm-12 my-4">
                  <!-- Data Not Found Image -->
                  <img class="no_found_image" src="{% static 'assets/img/generic/nofound.svg' %}" alt="">
                  <h5 class="text-secondary my-2"> No Data Found</h5>
                </div>
              </div>
            {% endif %}
          </div>
      </div>
    </main>
    {% include 'seconed_fotter.html' %}

{% endblock content %}
